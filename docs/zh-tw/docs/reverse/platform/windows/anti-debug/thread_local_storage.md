# Thread Local Storage(TLS)

線程本地存儲(TLS)用於在線程啓動前對特定線程數據進行初始化, 因爲每個進程都包含至少1個線程, 在主線程運行前初始化數據. 初始化操作可以通過指定一個已經複製到動態分配內存中去的靜態緩衝區, 和/或通過在回調函數數組中執行代碼, 來初始化動態內存內容. 經常是由於濫用回調函數數組而造成問題.

在運行時, TLS回調函數數組內容可以被修改或增加, 新加入或新修改的回調函數會使用新地址進行調用. 回調函數的數目也沒有限制. 數組的擴展操作可以用以下代碼完成:

``` asm
l1: mov d [offset cbEnd], offset l2
    ret
l2: ...
```

當l1處的回調返回時就會繼續調用l2的回調函數

> todo: continue to finish it


